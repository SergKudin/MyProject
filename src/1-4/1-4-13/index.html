<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>

  <body>
    <div class="task">
      <h1>Task 13</h1>
      <form>
        <label for="imgAdress1">Enter text to save with localStorage:</label><br>
        <textarea id="imgAdress1" name="imgAdress1" onchange="saveTextWithLocalStorage()"
                  rows="5" cols="100">
        </textarea>
        <br>
        <label for="imgAdress2">Enter text to save with Cookies:</label><br>
        <textarea id="imgAdress2" name="imgAdress2" onchange="saveTextWithCookies()"
                  rows="5" cols="100">
        </textarea>
        <br>
        <label for="imgAdress3">Enter text to save with sessionStorage:</label><br>
        <textarea id="imgAdress3" name="imgAdress3" onchange="saveTextWithSessionStorage()"
                  rows="5" cols="100">
        </textarea>
        <br>
      </form>
    </div>

    <script>
window.onload = function () {
  imgAdress1.value = localStorage.getItem('txt');
  imgAdress2.value = getCookie('txt')||'';
  imgAdress3.value = sessionStorage.getItem('txt');
}

function saveTextWithLocalStorage(){
const txt = imgAdress1.value;
localStorage.setItem('txt',txt);
}

function saveTextWithCookies(){
  const txt = imgAdress2.value;
  setCookie('txt', txt);
  // alert(getCookie('txt')||'');
}

function saveTextWithSessionStorage(){
  const txt = imgAdress3.value;
  sessionStorage.setItem('txt',txt);
}

function setCookie(name, value, options = {}) {

options = {path: '/',  ...options};

if (options.expires instanceof Date) {
  options.expires = options.expires.toUTCString();
}

let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);

for (let optionKey in options) {
  updatedCookie += "; " + optionKey;
  let optionValue = options[optionKey];
  if (optionValue !== true) {
    updatedCookie += "=" + optionValue;
  }
}

document.cookie = updatedCookie;
}

function getCookie(name) {
  let matches = document.cookie.match(new RegExp(
    "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
  ));
  return matches ? decodeURIComponent(matches[1]) : undefined;
}
    </script>
  </body>
</html>